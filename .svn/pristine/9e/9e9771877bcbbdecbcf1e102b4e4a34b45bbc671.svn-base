<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>添智·智慧工会云服务平台</title>
    <meta name="keywords">
    <meta name="description">
    <link rel="shortcut icon" href="favicon.ico">
    <link href="css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <!-- Morris -->
    <link href="css/plugins/morris/morris-0.4.3.min.css" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css?v=4.1.0" rel="stylesheet">
    <link href="css/combo.select.css" rel="stylesheet">
    <link href="css/plugins/treeview/bootstrap-treeview.css" rel="stylesheet">
    <link href="css/plugins/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">
    <link href="css/plugins/iCheck/custom.css" rel="stylesheet">
    <!-- Data Tables -->
    <link href="css/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet">

</head>
<body class="gray-bg sidebar-content">
<style>


    .dataTables-example td, .dataTables-example th {
        padding: 8px 0 !important;
    }

    #unionChange {
        height: 500px;
        overflow-y: scroll;
        position: relative;
    }

    .file-add {
        padding-top: 20px;
    }

    .butt-right {
        width: 28%;
    }

    .file-operating li {
        float: left;
        margin-left: 5px;
    }

    [v-cloak] {
        display: none;
    }

    .btn-group {
        width: 210px;
        height: 39px;
        margin-bottom: 12px;
    }

    .btn-default.active.focus, .btn-default.active:focus,
    .btn-default.active:hover, .btn-default:active.focus,
    .btn-default:active:focus, .btn-default:active:hover,
    .open > .dropdown-toggle.btn-default.focus, .open > .dropdown-toggle.btn-default:focus,
    .open > .dropdown-toggle.btn-default:hover {
        background-color: white;

    }

    .btn-default:hover, .btn-default:focus, .btn-default:active,
    .btn-default.active, .open .dropdown-toggle.btn-default {
        background-color: white;
    }

    .btn-default.active, .btn-default:focus, .btn-default:hover {
        background-color: white;
    }

    .btn-group input {
        width: 100%;
        height: 40px;
        background-color: white;
        font-size: 12px !important;
        text-align: left;
    }

    .btn-group .dropdown-menu {
        width: 210px;
        height: 200px;
        overflow: hidden;
        overflow-y: scroll;
    }

    .btn-group .dropdown-menu li {
        width: 90%;
        height: 35px;
        line-height: 35px;
        padding-left: 10px;
        border-bottom: 1px solid #e6e6e6;
        font-size: 14px;
    }

    .btn-group .dropdown-menu li:hover {
        background-color: #1b6d85;
        color: white;
    }

    .input-sm {
        height: 40px !important;
    }

    .input-sm option {
        width: 100%;
        height: 40px !important;
    }

</style>


<div id="treeGhlist">
    <div class="sidebard-panel">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>工会列表</h5>
                </div>
                <div class="unlist-wrap">
                    <div class="btn-group">
                        <input class="btn btn-default btn-lg dropdown-toggle"
                               type="text" data-toggle="dropdown"
                               v-model="searchVal"
                               aria-haspopup="true"
                               placeholder="请选择工会"
                               aria-expanded="false"></input>
                        <ul class="dropdown-menu">

                            <li v-for="(item,key) in list"
                                @click="showDetails(item.laborun_code)
                                ">{{item.laborun_name}}
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="ibox-content">
                    <div id="treeview5" class="test"></div>
                    <div class="iconshow">
                        <ul class="no-padding">
                            <li>
                                <i class="fa fa fa-sitemap"></i>
                                <span class="nav-label">组织工会</span>
                            </li>
                            <li><i class="fa fa fa-database"></i>
                                <span class="nav-label">产业工会</span></li>
                            <li><i class="fa fa fa-building"></i>
                                <span class="nav-label">企事业工会</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="wrapper wrapper-content animated fadeIn">
        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>{{ Detailslist.laborunName }}</h5>
                    </div>
                    <div class="ibox-content">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="tabs-container">
                                    <ul class="nav nav-tabs">
                                        <li class="active"><a data-toggle="tab" href="#tab-1" aria-expanded="true">
                                            工会详情</a></li>
                                        <li class=""><a data-toggle="tab" href="#tab-2" aria-expanded="false">基层工会</a>
                                        </li>
                                    </ul>
                                    <div class="tab-content">
                                        <!--工会详情选项卡开始-->
                                        <div id="tab-1" class="tab-pane active">
                                            <div class="panel-body">
                                                <div class="row">
                                                    <div class="col-sm-12">
                                                        <div class="tabs-container">
                                                            <ul class="nav nav-tabs">
                                                                <li class="active"><a data-toggle="tab" href="#tab-1-1" aria-expanded="true"> 基本信息</a></li>
                                                                <li class=""><a data-toggle="tab" href="#tab-1-2" aria-expanded="false">法人资格</a></li>
                                                                <li class=""><a data-toggle="tab" href="#tab-1-3" aria-expanded="false">工会变更</a></li>
                                                                <li class=""><a data-toggle="tab" href="#tab-1-4" @click="queryLaborunFilesRecord(2)" aria-expanded="false">资质管理</a></li>
                                                                <li class=""><a data-toggle="tab" href="#tab-1-5" @click="queryFilesRecord2(3)" aria-expanded="false">文件档案</a></li>
                                                                <li class=""><a data-toggle="tab" href="#tab-1-6" @click="queryDuty()" aria-expanded="false">任职管理</a></li>
                                                                <li class=""><a data-toggle="tab" href="#tab-1-7" aria-expanded="false">账户管理</a></li>
                                                            </ul>
                                                            <div class="tab-content">
                                                                <div id="tab-1-1" class="tab-pane active">
                                                                    <div class="panel-body table-scroll"
                                                                         id="unionDetails"
                                                                         v-cloak>
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                <div class="table-responsive">
                                                                                    <table class="table table-striped table-hover no-bottom">
                                                                                        <tbody>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border col-sm-3">
                                                                                                工会名称 :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                {{Detailslist.laborunName}}
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border col-sm-3">
                                                                                                工会编号 :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                {{Detailslist.laborunCode}}
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border col-sm-3">
                                                                                                建会时间 :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                {{Detailslist.establishTime}}
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border col-sm-3">
                                                                                                行政区划 :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                {{Detailslist.administratName}}
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border col-sm-3">
                                                                                                工会地址 :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                {{Detailslist.laborunAddr}}
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border col-sm-3">
                                                                                                工会状态 :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                {{Detailslist.laborunStatusText}}
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border col-sm-3">
                                                                                                工会备注 :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                {{Detailslist.remark}}
                                                                                            </td>
                                                                                        </tr>
                                                                                        </tbody>
                                                                                    </table>
                                                                                </div>
                                                                            </div>
                                                                            <!--工会编号-->
                                                                            <div class="col-sm-6">
                                                                                <div class="table-responsive">
                                                                                    <table class="table table-striped table-hover no-bottom">
                                                                                        <tbody>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border col-sm-3">
                                                                                                工会级别 :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                {{Detailslist.laborunLevelText}}
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border col-sm-3">
                                                                                                工会类型 :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                {{Detailslist.laborunTypeText}}
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border col-sm-3">
                                                                                                上级工会 :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                {{Detailslist.parentLaborunName}}
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border col-sm-3">
                                                                                                组建方式 :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                {{Detailslist.buildWayText}}
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border col-sm-3">
                                                                                                负责人 :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                {{Detailslist.principal}}
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border col-sm-3">
                                                                                                负责人电话 :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                {{Detailslist.principalPhone}}
                                                                                            </td>
                                                                                        </tr>
                                                                                        </tbody>
                                                                                    </table>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <!--工会详情 基本信息-->
                                                                        <div class="row">
                                                                            <div class="col-sm-12">
                                                                                <div class="table-responsive">
                                                                                    <table class="table table-striped table-hover">
                                                                                        <tbody>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border top-left"
                                                                                                style="width: 12%">工会单位
                                                                                                :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                <table class="table table-bordered">
                                                                                                    <thead>
                                                                                                    <tr>
                                                                                                        <th>单位名称</th>
                                                                                                        <th>统一社会信用代码</th>
                                                                                                        <th>单位类型</th>
                                                                                                        <th>负责人</th>
                                                                                                        <th>负责人电话</th>
                                                                                                    </tr>
                                                                                                    </thead>
                                                                                                    <tbody>
                                                                                                    <tr v-for="item in Detailslist.unitList">
                                                                                                        <td>{{item.unitName}}</td>
                                                                                                        <td>{{item.socialCreditCode}}</td>
                                                                                                        <td>{{item.unitTypeText}}</td>
                                                                                                        <td>{{item.principal}}</td>
                                                                                                        <td>{{item.principalPhone}}</td>
                                                                                                    </tr>
                                                                                                    </tbody>
                                                                                                </table>
                                                                                            </td>
                                                                                        </tr>
                                                                                        </tbody>
                                                                                    </table>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-12">
                                                                                <div class="ibox float-e-margins"
                                                                                     style="margin-top: 25px">
                                                                                    <p style="text-align: center;">
                                                                                        <a data-toggle="modal"
                                                                                           class="btn btn-primary"
                                                                                           style="text-align: left;"
                                                                                           href="#modal-formo">建会</a>
                                                                                        <button type="button"
                                                                                                class="btn  btn-primary"
                                                                                                onclick="transfer()">转移
                                                                                        </button>
                                                                                        <button type="button"
                                                                                                class="btn  btn-primary"
                                                                                                onclick="merge()">合并
                                                                                        </button>
                                                                                        <button type="button"
                                                                                                class="btn  btn-primary"
                                                                                                onclick="dissolve()">解散
                                                                                        </button>
                                                                                    </p>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!--法人资格-->
                                                                <div id="tab-1-2" class="tab-pane">
                                                                    <div class="panel-body">
                                                                        <div style="margin-left: 20px">
                                                                            <button type="button" class="btn  btn-primary" onclick="updateLegal()">变更法人资格</button>
                                                                            <button type="button" class="btn  btn-primary" onclick="legelRecord()">变更记录
                                                                            </button>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-sm-12">
                                                                                <div class="table-responsive">
                                                                                    <table class="table table-hover">
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border col-sm-1"
                                                                                                style="width: 12%">法人信息
                                                                                                :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                <table class="table table-bordered">
                                                                                                    <thead>
                                                                                                    <tr>
                                                                                                        <th>会员名称</th>
                                                                                                        <th>会员证号</th>
                                                                                                        <th>证件号</th>
                                                                                                        <th>工会职务</th>
                                                                                                    </tr>
                                                                                                    </thead>
                                                                                                    <tbody>
                                                                                                    <tr>
                                                                                                        <td>
                                                                                                            {{leageldata.memName}}
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            {{leageldata.memNumber}}
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            {{leageldata.cardNo}}
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            {{leageldata.dutyName}}
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    </tbody>
                                                                                                </table>
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border col-sm-2">
                                                                                                统一社会信用代码 :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                {{leageldata.socialCreditCode}}
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border top-left"
                                                                                                style="width: 10%">收入信息
                                                                                                :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                <table class="table table-bordered">
                                                                                                    <thead>
                                                                                                    <tr>
                                                                                                        <th>上年结余累计</th>
                                                                                                        <th>年会员会费</th>
                                                                                                        <th>年2%经费留成</th>
                                                                                                        <th>其他收入</th>
                                                                                                    </tr>
                                                                                                    </thead>
                                                                                                    <tbody>
                                                                                                    <tr>
                                                                                                        <td>
                                                                                                            {{leageldata.lastYearBalance}}
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            {{leageldata.annualMemsFee}}
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            {{leageldata.annualFunds}}
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            {{leageldata.otherIncome}}
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    </tbody>
                                                                                                </table>
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border top-left"
                                                                                                style="width: 10%">资金情况
                                                                                                :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                <table class="table table-bordered">
                                                                                                    <thead>
                                                                                                    <tr>
                                                                                                        <th>合计</th>
                                                                                                        <th>固定资金</th>
                                                                                                        <th>流动资金</th>
                                                                                                        <th>其他</th>
                                                                                                    </tr>
                                                                                                    </thead>
                                                                                                    <tbody>
                                                                                                    <tr>
                                                                                                        <td>
                                                                                                            {{capitalSum}}
                                                                                                        </td>
                                                                                                        <td>{{
                                                                                                            leageldata.fixedCapital
                                                                                                            }}
                                                                                                        </td>
                                                                                                        <td>{{
                                                                                                            leageldata.workingCapital
                                                                                                            }}
                                                                                                        </td>
                                                                                                        <td>{{
                                                                                                            leageldata.otherCapital
                                                                                                            }}
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    </tbody>
                                                                                                </table>
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border top-left"
                                                                                                style="width: 10%">场所情况
                                                                                                :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                <table class="table table-bordered">
                                                                                                    <thead>
                                                                                                    <tr>
                                                                                                        <th>合计</th>
                                                                                                        <th>办公场所</th>
                                                                                                        <th>活动场所</th>
                                                                                                        <th>其他场所</th>
                                                                                                    </tr>
                                                                                                    </thead>
                                                                                                    <tbody>
                                                                                                    <tr>
                                                                                                        <td>
                                                                                                            {{officeSum}}
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            {{leageldata.office}}
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            {{leageldata.activities}}
                                                                                                        </td>
                                                                                                        <td>
                                                                                                            {{leageldata.otherPlace}}
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    </tbody>
                                                                                                </table>
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr class="nback">
                                                                                            <td class="client-link no-top-border col-sm-1">
                                                                                                民事责任 :
                                                                                            </td>
                                                                                            <td class="no-top-border">
                                                                                                {{leageldata.civilLiability}}
                                                                                            </td>
                                                                                        </tr>
                                                                                        </tbody>
                                                                                    </table>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!--工会变更-->
                                                                <div id="tab-1-3" class="tab-pane" v-cloak>
                                                                    <div class="panel-body">
                                                                        <table class="table table-bordered">
                                                                            <thead class="tab-fiexd">
                                                                            <tr>
                                                                                <th>变更</th>
                                                                                <th>变更时间</th>
                                                                                <th>变更项</th>
                                                                                <th>操作备注</th>
                                                                            </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                            <tr v-for="(item,name) in unionCh">
                                                                                <td>{{item.changeType}}</td>
                                                                                <td>{{item.applyTime}}</td>
                                                                                <td>{{item.changeConcent}}</td>
                                                                                <td>{{item.remark}}</td>

                                                                            </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                                <!--资质管理-->
                                                                <div id="tab-1-4" class="tab-pane">
                                                                    <div class="file-add">
                                                                        <div style="margin-left: 20px">
                                                                            <button type="button" class="btn  btn-primary" onclick="addfile(2)">添加</button>
                                                                        </div>
                                                                        <table class="table table-striped  table-hover fileRecord"
                                                                               id="fileRecord">
                                                                            <thead>
                                                                            <tr>
                                                                                <th>文件名称</th>
                                                                                <th>文件</th>
                                                                                <th>文件分类</th>
                                                                                <th>操作</th>
                                                                            </tr>
                                                                            </thead>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                                <!--文件档案-->
                                                                <div id="tab-1-5" class="tab-pane" v-cloak>
                                                                    <div class="file-add">
                                                                        <div style="margin-left: 20px">
                                                                            <button type="button"
                                                                                    class="btn  btn-primary"
                                                                                    onclick="addfile(3)">添加
                                                                            </button>
                                                                        </div>
                                                                        <table class="table table-striped  table-hover"
                                                                               id="fileRecord2">
                                                                            <thead>
                                                                            <tr>
                                                                                <th>文件名称</th>
                                                                                <th>文件</th>
                                                                                <th>文件分类</th>
                                                                                <th>操作</th>
                                                                            </tr>
                                                                            </thead>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                                <!--任职管理-->
                                                                <div id="tab-1-6" class="tab-pane">
                                                                    <div class="file-add">
                                                                        <div style="margin-left: 20px">
                                                                            <button type="button"
                                                                                    class="btn  btn-primary"
                                                                                    onclick="addDuty()">添加
                                                                            </button>
                                                                            <button type="button"
                                                                                    class="btn  btn-primary"
                                                                                    onclick="queryDuty()">任职记录
                                                                            </button>
                                                                        </div>
                                                                        <table class="table table-striped  table-hover "
                                                                               id="queryDuty">
                                                                            <thead>
                                                                            <tr>
                                                                                <th>工会职务</th>
                                                                                <th>任职人员</th>
                                                                                <th>会员证号</th>
                                                                                <th>任职时间</th>
                                                                                <th>操作</th>
                                                                            </tr>
                                                                            </thead>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                                <!--账户管理-->
                                                                <div id="tab-1-7" class="tab-pane">
                                                                    <div class="row">
                                                                        <div class="col-sm-12">
                                                                            <form class="form-horizontal m-t">
                                                                                <div class="form-group">
                                                                                    <label class="col-sm-3 control-label">用户账户：</label>
                                                                                    <div class="col-sm-4">
                                                                                        <input id="userName"
                                                                                               name="userName"
                                                                                               class="form-control"
                                                                                               type="text">
                                                                                    </div>
                                                                                </div>
                                                                                <div class="form-group">
                                                                                    <label class="col-sm-3 control-label">用户密码：</label>
                                                                                    <div class="col-sm-4">
                                                                                        <input id="password"
                                                                                               name="password"
                                                                                               class="form-control"
                                                                                               type="text">
                                                                                    </div>
                                                                                </div>
                                                                                <div class="form-group">
                                                                                    <div class="col-sm-8 col-sm-offset-3">
                                                                                        <input type="button"
                                                                                               class="btn btn-primary"
                                                                                               @click="" value="保存">

                                                                                    </div>
                                                                                </div>
                                                                            </form>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!--基层工会选项卡开始-->
                                        <div id="tab-2" class="tab-pane">
                                            <div class="panel-body">
                                                <div class="ibox float-e-margins">
                                                    <div class="ibox-content">
                                                        <div class="row" id="nameselect" v-cloak>
                                                            <div class="col-sm-4 no-padding">
                                                                <div class="col-sm-4 lin-h40 wid27  no-padding client-link">
                                                                    工会名称：
                                                                </div>
                                                                <div class="col-sm-8   no-padding UnionName">
                                                                    <select class="input-sm form-control input-s-sm inline"
                                                                            id="laborunName">
                                                                        <option value="">请选择</option>
                                                                        <option value="0" v-for="(item,name) in Ghlist">
                                                                            {{item.laborun_name}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-4 no-padding">
                                                                <div class="col-sm-4 wid27 no-padding lin-h40 client-link">
                                                                    工会编号：
                                                                </div>
                                                                <div class="col-sm-8  no-padding UnionCode">
                                                                    <select class="input-sm form-control input-s-sm inline" id="laborunCode">
                                                                        <option value="">请选择</option>
                                                                        <option value="0" v-for="(item,name) in Ghlist">
                                                                            {{item.laborun_code}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-4 no-padding">
                                                                <div class="col-sm-12 no-padding">
                                                                    <button type="button"
                                                                            class="btn  btn-primary mar-r15"
                                                                            onclick="Search()">搜索
                                                                    </button>
                                                                    <button type="button"
                                                                            class="btn  btn-primary mar-r15" id="reset">
                                                                        重置
                                                                    </button>
                                                                    <a href="javacript:void(0)" class="more"><span
                                                                            class="lin-h40">高级搜索></span></a>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-12 no-padding disn morecheackboxo">
                                                                <div class="col-sm-1 wid9  no-padding  client-link lin-h40">
                                                                    工会类型：
                                                                </div>
                                                                <div class="form-group lin-h40 col-sm-10">
                                                                    <div class="col-sm-12">
                                                                        <label class="checkbox-inline i-checks">
                                                                            <input type="checkbox" value="option1"
                                                                                   class="allCheck"> 全部
                                                                        </label>
                                                                        <label class="checkbox-inline i-checks">
                                                                            <input type="checkbox" value="option2">
                                                                            基层工会委员会</label>
                                                                        <label class="checkbox-inline i-checks">
                                                                            <input type="checkbox" value="option3">
                                                                            基层工会联合委员会</label>
                                                                        <label class="checkbox-inline i-checks">
                                                                            <input type="checkbox" value="option4">
                                                                            联合基层工会委员会</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-12 no-padding disn morecheackboxt">
                                                                <div class="col-sm-1 wid9  no-padding  client-link lin-h40">
                                                                    工会级别：
                                                                </div>
                                                                <div class="form-group lin-h40 col-sm-10">
                                                                    <div class="col-sm-12">
                                                                        <label class="checkbox-inline i-checks">
                                                                            <input type="checkbox" class="allCheck"
                                                                                   value="option1"> 全部</label>
                                                                        <label class="checkbox-inline i-checks">
                                                                            <input type="checkbox" value="option2"> 组织工会</label>
                                                                        <label class="checkbox-inline i-checks">
                                                                            <input type="checkbox" value="option3"> 产业工会</label>
                                                                        <label class="checkbox-inline i-checks">
                                                                            <input type="checkbox" value="option4">
                                                                            企事业工会</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-12">
                                                                <div class="ibox float-e-margins"
                                                                     style="margin-top: 25px">
                                                                    <a data-toggle="modal" class="btn btn-primary"
                                                                       style="text-align: left;"
                                                                       href="#modal-formo">建会</a>
                                                                    <button type="button" class="btn btn-primary"
                                                                            style="text-align: left;"
                                                                            onclick="transfer()">转移
                                                                    </button>
                                                                    <button type="button" onclick="merge()"
                                                                            style="text-align: left;"
                                                                            class="btn btn-primary">合并
                                                                    </button>
                                                                    <button type="button" onclick="dissolve()"
                                                                            style="text-align: left;"
                                                                            class="btn btn-primary">解散
                                                                    </button>
                                                                    <button type="button"
                                                                            class="btn  btn-primary mar-r15"
                                                                            style="text-align: right;">导入
                                                                    </button>
                                                                    <button type="button" onclick="downloadExcel()"
                                                                            class="btn  btn-primary mar-r15"
                                                                            style="text-align: right;">导入模板
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!--基层工会 表格-->
                                                        <div class="table-responsive row">
                                                            <table class="table table-striped  table-hover dataTables-example">
                                                                <thead>
                                                                <tr>
                                                                    <th>
                                                                        <label class="checkbox-inline i-checks"
                                                                               style="font-weight: 700">
                                                                            <input type="checkbox" class="allCheckList" value="option1"> 全选
                                                                        </label>
                                                                    </th>
                                                                    <th>工会名称</th>
                                                                    <th>工会编号</th>
                                                                    <th>行政区划</th>
                                                                    <th>工会级别</th>
                                                                    <th>工会类型</th>
                                                                    <th>工会状态</th>
                                                                    <th>操作</th>
                                                                </tr>
                                                                </thead>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--建会 转移 跳转弹框-->
    <div id="modal-formo" class="modal fade" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content animated flipInY">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span
                            class="sr-only">Close</span></button>
                    <h4 class="modal-title">请选择一种工会级别：</h4>
                </div>
                <small class="font-bold">
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-sm-10">
                                <div class="radio i-checks col-sm-4">
                                    <label class="" @click="checklaborunLevel(1)">
                                        <div class="iradio_square-green" style="position: relative;">
                                            <input type="radio" :value="1"  name='laborunLevel' v-model='laborunLevel'
                                                   style="position: absolute; opacity: 0;">
                                            <ins class="iCheck-helper" style="position: absolute; top: 0%; left: 0%; display: block; width: 100%; height: 100%; margin: 0px; padding: 0px; background: rgb(255, 255, 255); border: 0px; opacity: 0;"></ins>
                                        </div>
                                        <i></i>组织工会</label>
                                </div>
                                <div class="radio i-checks col-sm-4" style="margin: 10px 0" >
                                    <label class="" @click="checklaborunLevel(2)">
                                        <div class="iradio_square-green " style="position: relative;" >
                                            <input type="radio" :value="2" name='laborunLevel'  v-model='laborunLevel' style="position: absolute; opacity: 0;">
                                            <ins class="iCheck-helper" style="position: absolute; top: 0%; left: 0%; display: block; width: 100%; height: 100%; margin: 0px; padding: 0px; background: rgb(255, 255, 255); border: 0px; opacity: 0;">
                                            </ins>
                                        </div>
                                        <i></i>产业工会</label>
                                </div>
                                <div class="radio i-checks col-sm-4" style="margin: 10px 0">
                                    <label class="" @click="checklaborunLevel(3)">
                                        <div class="iradio_square-green " style="position: relative;">
                                            <input type="radio" :value="3" name='laborunLevel' v-model='laborunLevel' style="position: absolute; opacity: 0;">
                                            <ins class="iCheck-helper" style="position: absolute; top: 0%; left: 0%; display: block; width: 100%; height: 100%; margin: 0px; padding: 0px; background: rgb(255, 255, 255); border: 0px; opacity: 0;"></ins>
                                        </div>
                                        <i></i> 企事业工会</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <a data-toggle="modal" class="btn btn-primary" onclick="establish()"
                           href="#modal-formt">确定</a>
                        <button type="button" class="btn btn-white" data-dismiss="modal">关闭</button>
                    </div>
                </small>
            </div>
            <small class="font-bold">
            </small>
        </div>
    </div>
</div>


<!-- 全局js -->
<script src="js/jquery.min.js?v=2.1.4"></script>
<!--自定义js -->
<script src="js/baseaddr.js"></script>
<script src="js/bootstrap.min.js?v=3.3.6"></script>
<script src="js/plugins/jeditable/jquery.jeditable.js"></script>
<script src="js/plugins/dataTables/jquery.dataTables.js"></script>
<script src="js/plugins/dataTables/dataTables.bootstrap.js"></script>
<!--vue axios-->
<script src="js/vue2.5.22.js"></script>
<script src="js/ixios.0.18.0.js"></script>
<script src="js/qs.6.60.js"></script>

<script>
    var vm = new Vue({
        el: "#treeGhlist",
            data: {
                Ghlist: [], //左侧工会名称
                Detailslist: [], //工会详情信息
                leageldata: {},
                laborunLevel:3,
                unionCh: [], //请求工会变更信息
                code: '',    //左侧列表code
                Ghhlist: [], //模糊列表
                unioncode: '140000000000', //详情字段
                searchVal: '', //默认输入为空
                letter: '', //默认不排序
                original: false, //默认从小到大排列
                fileTable: null,
                fileTable2: null,
                dutyTable: null,
                fileId:'',
                dutyId :''
        },
        methods: {
            showDetails: function (code) {
                this.unioncode = code
                console.log(this.unioncode)
                var that = this;
                axios({
                    method: 'post',
                    url: baseUrl + "/passLaborweb/api/laborun/union/query",
                    data: {
                        "laborunCode": this.unioncode
                    }
                }).then(function (data) {
                    that.Detailslist = data.data.data;
                    console.log(that.Detailslist)
                });
            },
            queryLaborunFilesRecord(fileType) {
                var that = this;
                if(that.fileTable  === null){
                    that.fileTable = $('#fileRecord').dataTable({
                        sDom: '"top"i',   //去掉搜索框方法二：这种方法可以，动态获取数据时会引起错误
                        ordering: false,
                        language: lang,  //提示信息
                        bLengthChange: false,   //去掉每页显示多少条数据方法
                        autoWidth: true,  //禁用自动调整列宽
                        stripeClasses: ["odd", "even"],  //为奇偶行加上样式，兼容不支持CSS伪类的场合
                        processing: true,  //隐藏加载提示,自行处理
                        serverSide: true,  //启用服务器端分页
                        searching: false,  //禁用原生搜索
                        orderMulti: false,  //启用多列排序
                        order: [],  //取消默认排序查询,否则复选框一列会出现小箭头
                        renderer: "bootstrap",  //渲染样式：Bootstrap和jquery-ui
                        pagingType: "full_numbers",  //分页样式：simple,simple_numbers,full,full_numbers
                        columnDefs: [{
                            "targets": 'nosort',  //列的样式名
                            "orderable": false    //包含上样式名‘nosort’的禁止排序
                        }],
                        ajax: function (data, callback, settings) {
                            //封装请求参数
                            var param = {};
                            param.size = data.length;//页面显示记录条数，在页面显示每页显示多少项的时候
                            param.page = (data.start / data.length) + 1;
                            param.fileType = fileType;//当前页码
                            $.ajax({
                                type: "post",
                                url: baseUrl + "/passLaborweb/api/laborun/laborunFilesRecord/queryPage",
                                cache: false,  //禁用缓存
                                data: JSON.stringify(param),  //传入组装的参数
                                dataType: "json",
                                contentType: "application/json",
                                success: function (result) {
                                    /*     console.log(result);*/
                                    var returnData = {};
                                    returnData.draw = data.draw;//这里直接自行返回了draw计数器,应该由后台返回
                                    returnData.recordsTotal = result.data.total;//返回数据全部记录
                                    returnData.recordsFiltered = result.data.total;//后台不实现过滤功能，每次查询均视作全部结果
                                    returnData.data = result.data.content;//返回的数据列表
                                    callback(returnData);
                                }
                            });
                        },
                        columns: [
                            {"data": "fileName"},
                            {"data": "fileConcent"},
                            {"data": "fileKindName"},
                            {
                                "render": function (data, type, row, meta) {
                                    var that = this
                                    return '<button type="button" class="btn  btn-primary" data-id="' + row.id + '" onclick="fileQuery(this)">查看</button>' +
                                        '<button type="button" style="margin-left: 10px" class="btn  btn-primary" data-id="' + row.id + '" onclick="fileEdit(this)" > 编辑</button>' +
                                        '<button type="button" style="margin-left: 10px" class="btn  btn-primary" data-id="' + row.id + '" onclick="fileDelete(this,2)" > 删除</button>';
                                },
                                "bSortable": false
                            },
                        ]
                    }).api();//此处需调用api()方法,否则返回的是JQuery对象而不是DataTables的API对象
                }

            },
            checklaborunLevel(laborunLevel){
                var that = this
                that.laborunLevel = laborunLevel;
            },
            queryFilesRecord2(fileType) {
                //初始化table
                var that =  this;
                if(that.fileTable2 === null){
                    that.fileTable2 = $('#fileRecord2').dataTable({
                        sDom: '"top"i',   //去掉搜索框方法二：这种方法可以，动态获取数据时会引起错误
                        ordering: false,
                        language: lang,  //提示信息
                        bLengthChange: false,   //去掉每页显示多少条数据方法
                        autoWidth: true,  //禁用自动调整列宽
                        stripeClasses: ["odd", "even"],  //为奇偶行加上样式，兼容不支持CSS伪类的场合
                        processing: true,  //隐藏加载提示,自行处理
                        serverSide: true,  //启用服务器端分页
                        searching: false,  //禁用原生搜索
                        orderMulti: false,  //启用多列排序
                        order: [],  //取消默认排序查询,否则复选框一列会出现小箭头
                        renderer: "bootstrap",  //渲染样式：Bootstrap和jquery-ui
                        pagingType: "full_numbers",  //分页样式：simple,simple_numbers,full,full_numbers
                        columnDefs: [{
                            "targets": 'nosort',  //列的样式名
                            "orderable": false    //包含上样式名‘nosort’的禁止排序
                        }],
                        ajax: function (data, callback, settings) {
                            //封装请求参数
                            var param = {};
                            param.size = data.length;//页面显示记录条数，在页面显示每页显示多少项的时候
                            param.page = (data.start / data.length) + 1;
                            param.fileType = fileType;//当前页码
                            $.ajax({
                                type: "post",
                                url: baseUrl + "/passLaborweb/api/laborun/laborunFilesRecord/queryPage",
                                cache: false,  //禁用缓存
                                data: JSON.stringify(param),  //传入组装的参数
                                dataType: "json",
                                contentType: "application/json",
                                success: function (result) {
                                    /*     console.log(result);*/
                                    var returnData = {};
                                    returnData.draw = data.draw;//这里直接自行返回了draw计数器,应该由后台返回
                                    returnData.recordsTotal = result.data.total;//返回数据全部记录
                                    returnData.recordsFiltered = result.data.total;//后台不实现过滤功能，每次查询均视作全部结果
                                    returnData.data = result.data.content;//返回的数据列表
                                    callback(returnData);
                                }
                            });
                        },
                        columns: [
                            {"data": "fileName"},
                            {"data": "fileConcent"},
                            {"data": "fileKindName"},
                            {
                                "render": function (data, type, row, meta) {
                                    return '<button type="button" class="btn  btn-primary" data-id="' + row.id + '" onclick="fileQuery(this)">查看</button>' +
                                        '<button type="button" style="margin-left: 10px" class="btn  btn-primary" data-id="' + row.id + '" onclick="fileEdit(this)" > 编辑</button>' +
                                        '<button type="button" style="margin-left: 10px" class="btn  btn-primary" data-id="' + row.id + '" onclick="fileDelete(this,3)" > 删除</button>';
                                },
                                "bSortable": false
                            },
                        ]
                    }).api();//此处需调用api()方法,否则返回的是JQuery对象而不是DataTables的API对象
                }

            },
            queryDuty() {
                var that = this
                if(that.dutyTable === null ){
                    that.dutyTable = $('#queryDuty').dataTable({
                        sDom: '"top"i',   //去掉搜索框方法二：这种方法可以，动态获取数据时会引起错误
                        ordering: false,
                        language: lang,  //提示信息
                        bLengthChange: false,   //去掉每页显示多少条数据方法
                        autoWidth: true,  //禁用自动调整列宽
                        stripeClasses: ["odd", "even"],  //为奇偶行加上样式，兼容不支持CSS伪类的场合
                        processing: true,  //隐藏加载提示,自行处理
                        serverSide: true,  //启用服务器端分页
                        searching: false,  //禁用原生搜索
                        orderMulti: false,  //启用多列排序
                        order: [],  //取消默认排序查询,否则复选框一列会出现小箭头
                        renderer: "bootstrap",  //渲染样式：Bootstrap和jquery-ui
                        pagingType: "full_numbers",  //分页样式：simple,simple_numbers,full,full_numbers
                        columnDefs: [{
                            "targets": 'nosort',  //列的样式名
                            "orderable": false    //包含上样式名‘nosort’的禁止排序
                        }],
                        ajax: function (data, callback, settings) {
                            //封装请求参数
                            var param = {};
                            param.size = data.length;//页面显示记录条数，在页面显示每页显示多少项的时候
                            param.page = (data.start / data.length) + 1;
                            $.ajax({
                                type: "post",
                                url: baseUrl + "/passLaborweb/api/laborun/laborunDuty/queryPage",
                                cache: false,  //禁用缓存
                                data: JSON.stringify(param),  //传入组装的参数
                                dataType: "json",
                                contentType: "application/json",
                                success: function (result) {
                                    /*     console.log(result);*/
                                    var returnData = {};
                                    returnData.draw = data.draw;//这里直接自行返回了draw计数器,应该由后台返回
                                    returnData.recordsTotal = result.data.total;//返回数据全部记录
                                    returnData.recordsFiltered = result.data.total;//后台不实现过滤功能，每次查询均视作全部结果
                                    returnData.data = result.data.content;//返回的数据列表
                                    callback(returnData);
                                }
                            });
                        },
                        columns: [
                            {"data": "dutyName"},
                            {"data": "memName"},
                            {"data": "memNumber"},
                            {"data": "dutyTime"},
                            {
                                "render": function (data, type, row, meta) {
                                    return '<button type="button" class="btn  btn-primary" data-id="' + row.id + '" onclick="queryDuty(this)">查看</button>' +
                                        '<button type="button" style="margin-left: 10px" class="btn  btn-primary" data-id="' + row.id + '" onclick="dutyEdit(this)" >更换</button>' +
                                        '<button type="button" style="margin-left: 10px" class="btn  btn-primary" data-id="' + row.id + '" onclick="dutyDelete(this)" > 删除</button>';
                                },
                                "bSortable": false
                            },
                        ]
                    }).api();//此处需调用api()方法,否则返回的是JQuery对象而不是DataTables的API对象
                }

            }
        },
        mounted() {
            /*查看工会详情*/
            var that = this;
            axios({
                method: 'post',
                url: baseUrl + "/passLaborweb/api/laborun/union/query",
                data: {
                    "laborunCode": that.unioncode
                }
            }).then(function (data) {
                that.Detailslist = data.data.data;
                console.log(that.Detailslist)
            });

            /*工会变更查询*/
            axios({
                method: 'post',
                url: baseUrl + "/passLaborweb/api/laborun/laborunChRecord/queryPage",
                data: {
                    "laborunCode": ""
                }
            }).then(function (data) {
                /*   console.log(data.data.data)*/
                that.unionCh = data.data.data.content;
            });
            /*获取工会名称编号*/
            axios({
                method: 'get',
                url: baseUrl + "/passLaborweb/api/laborun/union/getLaborunList",
                data: {
                    "laborunName": ""
                }
            }).then(function (data) {
                /* console.log(data.data);*/
                that.Ghlist = data.data.data;
                console.log(that.Ghlist)

            });
            //模糊搜索之工会列表,工会编号
            axios({
                method: 'get',
                url: baseUrl + "/passLaborweb/api/laborun/union/getLaborunList",
                data: {
                    "laborunName": ""
                }
            }).then(function (data) {
                that.Ghhlist = data.data.data;
            });

            axios({
                method: 'post',
                url: baseUrl + "/passLaborweb/api/laborun/laborunLegal/query",
                data: {
                    "laborunCode": that.unioncode
                }
            }).then(function (res) {
                that.leageldata = res.data.data;
            });
        },
        computed: {
            /*   filterGhlist: function(){
                   var _this = this;
                   var arrByZM = [];
                   for (var i=0;i<this.Ghlist.length;i++){
                       if(this.Ghlist[i].name.search(this.searchVal) != -1){
                           arrByZM.push(this.Ghlist[i]);
                       }
                   }
                   if(this.letter != ''){
                       arrByZM.sort(function( a , b){
                           if(_this.original){
                               return b[_this.letter] - a[_this.letter];
                           }else{
                               return a[_this.letter] - b[_this.letter];
                           }
                       });
                   }
                   return arrByZM;
               }*/
            officeSum: function () {
                return parseInt(this.leageldata.office)
                    + parseInt(this.leageldata.activities)
                    + parseInt(this.leageldata.otherPlace);
            },
            capitalSum: function () {
                return parseFloat(this.leageldata.fixedCapital)
                    + parseFloat(this.leageldata.workingCapital)
                    + parseFloat(this.leageldata.otherCapital);
            },
            list: function () {
                var that = this;
                var arrByZM = [];
                for (var i = 0; i < this.Ghlist.length; i++) {
                    if (this.Ghlist[i].laborun_name.search(this.searchVal) != -1) {
                        arrByZM.push(that.Ghlist[i]);
                    }
                }
                if (this.letter != '') {
                    arrByZM.sort(function (a, b) {
                        if (that.original) {
                            return b[that.letter] - a[that.letter];
                        } else {
                            return a[that.letter] - b[that.letter];
                        }
                    });
                }
                return arrByZM;
            }
        }

    });
</script>
<!--模糊搜索
<script src="js/jquery.combo.select.js"></script>-->
<!--高级搜索-->
<script>
    $('.more').on('click', function () {
        $(this).toggleClass("moreup");
        $('.morecheackboxo').slideToggle('slow');
        $('.morecheackboxt').slideToggle('slow');
        if ($(this).attr('class') == 'more moreup') {
            $(this).children('span').text('点击收起∨');
        } else {
            $(this).children('span').text('高级搜索>');
        }

    })
</script>
<!-- 自定义js -->
<script src="js/content.js?v=1.0.0"></script>
<!-- layer javascript -->
<script src="js/plugins/layer/layer.min.js"></script>

<script>
        layer.config({skin: 'layui-layer-molv'})
</script>
<!--建会，转移 点击弹框-->
<script>
    function establish() {
        var that = this
        $($('.modal-backdrop')[0]).hide('slow');
        $("#modal-formo").modal('hide');
        var  url =""
        var  title = "建会"
        var param = that.vm.Detailslist.laborunCode+'&laborunLevel='+that.vm.laborunLevel+'&laborunName='+that.vm.Detailslist.laborunName;
        if(that.vm.laborunLevel ===3){
            var  title = "建会(企事业单位)"
            url = 'union_addinfo_unit.html?laborunCode='+ param;
        }else{
            url = 'union_addinfo.html?laborunCode='+ param;
        }
        layer.open({
            type: 2,
            title: title,
            fixed: false,
            shadeClose: true, //点击遮罩关闭层
            area: ['100%', '100%'],
            content: url,
            shift: 0,
            offset: 0
        })
    }

    function transfer() {
        //自定页
        layer.open({
            type: 2,
            title: '转移',
            fixed: false,
            shadeClose: true, //点击遮罩关闭层
            area: ['100%', '100%'],
            content: 'union_transfer.html',
            shift: 0,
            offset: 0
        })
    }

    function merge() {
        //自定页
        layer.open({
            type: 2,
            title: '合并',
            fixed: false,
            shadeClose: true, //点击遮罩关闭层
            area: ['100%', '100%'],
            content: 'union_merge.html',
            shift: 0,
            offset: 0
        })
    }

    function dissolve() {
        //自定页
        layer.open({
            type: 2,
            title: '解散',
            fixed: false,
            shadeClose: true, //点击遮罩关闭层
            area: ['100%', '100%'],
            content: 'union-dissolution.html',
            shift: 0,
            offset: 0
        })
    }

    function addfile(fileType) {
        layer.open({
            type: 2,
            title: '添加文件',
            shadeClose: true,
            area: ['450px', '540px'],
            content: 'union-addfliemask.html?fileType=' + fileType
        })
    };
    function fileEdit(obj) {
        var id = $(obj)[0].attributes[3].nodeValue;
        var that = this
        layer.open({
            type: 2,
            title: '编辑文件',
            shadeClose: true,
            area: ['450px', '540px'],
            content: 'union-editfile.html?id=' + id
        })
    };
    function fileQuery(obj) {
        var id = $(obj)[0].attributes[2].nodeValue;
        var that = this
        layer.open({
            type: 2,
            title: '查看',
            shadeClose: true,
            area: ['450px', '300px'],
            content: 'union-queryfile.html?id=' + id
        })
    };

    function fileDelete(obj,fileType) {
        var that = this
        var id = $(obj)[0].attributes[3].nodeValue;
        axios({
            method: 'post',
            url: baseUrl + "/passLaborweb/api/laborun/laborunFilesRecord/delete",
            data: {
                "id": id
            }
        }).then(function (res) {
            if (res.data.code === '0') {
                layer.msg("删除成功", {icon: 1, time: 1000})
                if(fileType === 2){
                    that.vm.fileTable.draw(false);
                }else{
                    that.vm.fileTable2.draw(false);
                }
            } else {
                layer.msg(res.data.msg, {icon: 2, time: 1000})
            }
        });
    }

    function addDuty() {
        layer.open({
            type: 2,
            title: '添加任职',
            shadeClose: true,
            area: ['70%', '500px'],
            content: 'duty_add.html'
        })
    };

    function queryDuty(obj) {
        var id = $(obj)[0].attributes[2].nodeValue;
        layer.open({
            type: 2,
            title: '查看任职',
            shadeClose: true,
            area: ['70%', '450px'],
            content: 'duty_query.html?id='+id
        })
    };
    function dutyEdit(obj) {
        var id = $(obj)[0].attributes[3].nodeValue;
        layer.open({
            type: 2,
            title: '编辑任职',
            shadeClose: true,
            area: ['70%', '500px'],
            content: 'duty_edit.html?id='+id
        })
    };
    function dutyDelete(obj) {
        var id = $(obj)[0].attributes[3].nodeValue;
        var that = this
        axios({
            method: 'post',
            url: baseUrl + "/passLaborweb/api/laborun/laborunDuty/delete",
            data: {
                "id": id
            }
        }).then(function (res) {
            if (res.data.code === '0') {
                layer.msg("删除成功", {icon: 1, time: 1000})
                that.vm.fileTable.draw(false);
            } else {
                layer.msg(res.data.msg, {icon: 2, time: 1000})
            }
        });
    };

    function downloadExcel() {
        var aLink = document.createElement('a')
        aLink.download = "建会导入模板.xlsx"
        aLink.href = baseUrl + "/passLaborweb/api/laborun/file/download?fileName=建会导入模板.xlsx"
        aLink.click()
    };
</script>
<!-- jQuery UI -->
<script src="js/plugins/jquery-ui/jquery-ui.min.js"></script>

<!--树状图-->
<script src="js/plugins/treeview/bootstrap-treeview.js"></script>
<script src="js/demo/treeview-demo.js"></script>
<!-- iCheck -->
<script src="js/plugins/iCheck/icheck.min.js"></script>

<!--动态生成表格-->
<script>
    var unionTable;
    window.onload = function () {
        //初始化table
        unionTable = $('.dataTables-example').dataTable({
            sDom: '"top"i',   //去掉搜索框方法二：这种方法可以，动态获取数据时会引起错误
            ordering: false,
            bLengthChange: false,   //去掉每页显示多少条数据方法
            language: lang,  //提示信息
            autoWidth: true,  //禁用自动调整列宽
            stripeClasses: ["odd", "even"],  //为奇偶行加上样式，兼容不支持CSS伪类的场合
            processing: true,  //隐藏加载提示,自行处理
            serverSide: true,  //启用服务器端分页
            searching: false,  //禁用原生搜索
            orderMulti: false,  //启用多列排序
            order: [],  //取消默认排序查询,否则复选框一列会出现小箭头
            renderer: "bootstrap",  //渲染样式：Bootstrap和jquery-ui
            pagingType: "full_numbers",  //分页样式：simple,simple_numbers,full,full_numbers
            columnDefs: [{
                "targets": 'nosort',  //列的样式名
                "orderable": false    //包含上样式名‘nosort’的禁止排序
            }],
            ajax: function (data, callback, settings) {
                //封装请求参数
                var param = {};
                param.size = data.length;//页面显示记录条数，在页面显示每页显示多少项的时候
//                    param.start = data.start;//开始的记录序号
                param.page = (data.start / data.length) + 1;//当前页码
                if ($(".UnionName select option:selected").val() != "") {
                    param.laborunName = $(".UnionName select option:selected").text();
                }

                if ($(".UnionCode select option:selected").val() != "") {
                    param.laborunCode = $(".UnionCode select option:selected").text();
                }
//              param.order = data.order[0]
                //console.log(param);
                //ajax请求数据
                $.ajax({
                    type: "post",
                    url: baseUrl + "/passLaborweb/api/laborun/union/queryPage",
                    cache: false,  //禁用缓存
                    data: JSON.stringify(param),  //传入组装的参数
                    dataType: "json",
                    contentType: "application/json",
                    success: function (result) {
                        /*     console.log(result);*/
                        var returnData = {};
                        returnData.draw = data.draw;//这里直接自行返回了draw计数器,应该由后台返回
                        returnData.recordsTotal = result.data.total;//返回数据全部记录
                        returnData.recordsFiltered = result.data.total;//后台不实现过滤功能，每次查询均视作全部结果
                        returnData.data = result.data.content;//返回的数据列表
                        /* console.log(returnData);*/
                        callback(returnData);
                        $('.i-checks').iCheck({
                            checkboxClass: 'icheckbox_square-green',
                            radioClass: 'iradio_square-green',
                        });
                        $('select').comboSelect();
                        $(".allCheck").on('ifChanged', function (event) {
//                            console.log($(this));
                            var selectThis = $(this).parents('label').nextAll().find('input[type=checkbox]');
//                            console.log(selectThis);
                            selectThis.prop("checked", $(this).prop("checked"));
                            if ($(this)[0].checked) {
                                selectThis.parent().addClass("checked");
                            } else {
                                selectThis.parent().removeClass("checked");
                            }
                        });
                        //        列表全选功能
                        $(".allCheckList").on('ifChanged', function (event) {
//                            console.log($(this));
                            var selectThis = $(this).parents('thead').next('tbody').find('input[type=checkbox]');
//                            console.log(selectThis);
                            selectThis.prop("checked", $(this).prop("checked"));
                            if ($(this)[0].checked) {
                                selectThis.parent().addClass("checked");
                            } else {
                                selectThis.parent().removeClass("checked");
                            }
                        });

                        $('.dataTables-example tr td:first-child').css({"text-align": 'left'});
                        $('.dataTables-example tr th:first-child').css({"text-align": 'left'});

                    }
                });
            },
            //列表表头字段
            columns: [
                {
                    "render": function () {
                        return '<input type="checkbox" class="i-checks iCheck-helper" name="input[]">';
                    },
                    "bSortable": false
                },
                {"data": "laborunName"},
                {"data": "laborunCode"},
                {"data": "administratName"},
                {"data": "laborunLevelText"},
                {"data": "laborunTypeText"},
                {"data": "laborunStatusText"},
                {
                    "render": function () {
                        return ' <button type="button" class="btn  btn-primary " onclick="Vlook(this)" >查看</button>' +
                         ' <button type="button" class="btn  btn-primary Vedit" onclick="Vedit(this)" >编辑 </button>';
                    },
                    "bSortable": false
                },
            ]
        }).api();//此处需调用api()方法,否则返回的是JQuery对象而不是DataTables的API对象
    };

    function Search() {
        unionTable.draw(false);
    }

    $('#reset').on('click', function () {
        $('#laborunCode').val('');
        $('#laborunName').val('');
        unionTable.draw(false);
    })
</script>
<!--基层工会表格 查看 编辑-->
<script>
    // 查看功能
    function Vlook(obj) {
        var SeaCode = $(obj).parents('tr').children().eq(2).text();
        layer.open({
            type: 2,
            title: '',
            shadeClose: false,
            area: ['100%', '100%'],
            content:  'union_basicinfo.html?seacode=' + SeaCode
        })
    }

    function Vedit(obj) {
        var SeaCode = $(obj).parents('tr').children().eq(2).text();
        layer.open({
            type: 2,
            title: '工会编辑',
            shadeClose: true,
            area: ['100%', '100%'],
            content: 'union_detailsedit.html?seacode=' + SeaCode
        })
    }

    function updateLegal(){
        var that = this
        layer.open({
            type: 2,
            title: '法人资格',
            shadeClose: true,
            skin: 'layui-layer-molv',
            area: ['90%', '540px'],
            content: 'legal_edit.html?id='+that.vm.leageldata.id
        })
    }

    /*$('select').comboSelect();
    $('select').change(function (e) {
        alert('你选中了第'+(e.target.selectedIndex+1) + '项, ' + '值为: ' + e.target.value );
        $.ajax({
            type: "post",
            url: "http://112.35.92.177:90/passLaborweb/api/laborun/union/queryPage",
            cache: false,  //禁用缓存
            data: e.target.value,  //传入组装的参数
            dataType: "json",
            contentType: "application/json",
            success: function (result) {
                console.log(result);

            }
        });
    });*/

</script>


</body>
</html>
